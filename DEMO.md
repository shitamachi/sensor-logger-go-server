# 传感器数据解析演示

## 🎯 项目概述

本项目成功实现了一个完整的传感器数据接收和解析服务器，可以接收来自Sensor Logger应用的传感器数据，并将其转换为人类友好的格式进行展示。

## ✅ 已实现的功能

### 1. 完整的数据解析系统
- ✅ **多传感器支持**: 支持加速度计、陀螺仪、磁力计、重力传感器、方向传感器、指南针、计步器、位置、气压计等
- ✅ **智能数据解析**: 根据传感器类型自动解析数据并添加单位和描述
- ✅ **时间戳转换**: 将纳秒时间戳转换为人类可读的日期时间格式
- ✅ **精度标识**: 解析传感器精度等级（不可靠/低精度/中等精度/高精度）

### 2. 人类友好的数据展示
- ✅ **中文界面**: 完全中文化的用户界面
- ✅ **单位标识**: 所有数据都有适当的单位（m/s²、rad/s、μT、度等）
- ✅ **描述信息**: 每个数据项都有详细的中文描述
- ✅ **分类展示**: 按传感器类型组织数据

### 3. Web界面和API
- ✅ **主页**: 服务器状态和配置说明
- ✅ **实时仪表板**: 美观的数据展示界面，包含统计信息和最新数据
- ✅ **RESTful API**: 提供JSON格式的数据接口
- ✅ **自动刷新**: 仪表板支持自动刷新功能

### 4. 数据管理
- ✅ **文件保存**: 自动保存所有原始数据为JSON文件
- ✅ **内存管理**: 智能管理内存中的数据（最多保留100条记录）
- ✅ **统计信息**: 提供消息数、读数、传感器类型、设备数量等统计

## 📊 数据解析示例

### 加速度计数据
```
传感器类型: accelerometer
时间: 2025-07-05 15:30:25.123
精度: 高精度

X轴加速度: -0.032849 m/s² (X轴方向的加速度)
Y轴加速度: -0.004899 m/s² (Y轴方向的加速度)  
Z轴加速度: 0.089095 m/s² (Z轴方向的加速度)
```

### 陀螺仪数据
```
传感器类型: gyroscope
时间: 2025-07-05 15:30:25.147
精度: 高精度

X轴角速度: -0.051131 rad/s (绕X轴的角速度)
Y轴角速度: -0.031957 rad/s (绕Y轴的角速度)
Z轴角速度: 0.016911 rad/s (绕Z轴的角速度)
```

### 磁力计数据
```
传感器类型: magnetometer
时间: 2025-07-05 15:30:25.186
精度: 高精度

磁方位角: 137.28 度 (相对于磁北的方位角)
```

### 位置数据
```
传感器类型: location
时间: 2025-07-05 15:30:25.200
精度: 高精度

纬度: 39.90419800 度 (地理纬度)
经度: 116.40739600 度 (地理经度)
海拔: 43.20 米 (海拔高度)
速度: 0.00 m/s (移动速度)
方位角: 0.00 度 (移动方位角)
```

## 🏗️ 技术架构

### 数据流程
1. **接收**: Sensor Logger应用通过HTTP POST发送JSON数据到`/data`端点
2. **解析**: 服务器解析JSON数据，提取传感器信息
3. **转换**: 将原始数据转换为人类可读格式，添加单位和描述
4. **存储**: 原始数据保存为文件，解析后数据存储在内存中
5. **展示**: 通过Web界面和API提供数据访问

### 核心组件
- **SensorMessage**: 完整消息结构体
- **SensorReading**: 单个传感器读数结构体
- **ParsedSensorData**: 解析后的数据结构体
- **HumanReadableSensorData**: 人类可读的传感器数据结构体

## 🌐 API接口

### POST /data
接收传感器数据
```json
{
    "messageId": 27,
    "sessionId": "f08abd14-4a86-4913-8c33-f75269e862b9",
    "deviceId": "0e35011f-e2fe-482e-b9a1-1625bb039f37",
    "payload": [...]
}
```

### GET /dashboard
实时数据仪表板，显示：
- 统计信息（总消息数、总读数、传感器类型、设备数量）
- 最新传感器数据的人类友好展示
- 自动刷新功能

### GET /api/data
返回所有解析后的传感器数据（JSON格式）

## 🔧 使用方法

### 1. 启动服务器
```bash
go run main.go
```

### 2. 配置Sensor Logger应用
在应用中设置推送URL：`http://[服务器IP]:18000/data`

### 3. 查看数据
- 主页: `http://[服务器IP]:18000/`
- 仪表板: `http://[服务器IP]:18000/dashboard`
- API: `http://[服务器IP]:18000/api/data`

## 📁 项目文件

```
sensor-logger-server/
├── main.go                    # 主程序文件（632行代码）
├── go.mod                     # Go模块文件
├── README.md                  # 详细说明文档
├── DEMO.md                    # 演示文档（本文件）
├── test_data.json            # 测试数据文件
├── test_api.py               # Python测试脚本
├── test_sensor_data.py       # 传感器数据模拟脚本
└── sensor_data_*.json        # 保存的传感器数据文件
```

## 🎨 界面特色

### 响应式设计
- 适配桌面和移动设备
- 现代化的卡片布局
- 清晰的数据分组

### 实时更新
- 30秒自动刷新
- 实时统计信息
- 最新数据优先显示

### 用户友好
- 完全中文界面
- 直观的数据展示
- 详细的使用说明

## 🔍 数据解析能力

本系统能够解析以下传感器数据：

| 传感器 | 数据项 | 单位 | 说明 |
|--------|--------|------|------|
| 加速度计 | X/Y/Z轴加速度 | m/s² | 三轴加速度测量 |
| 陀螺仪 | X/Y/Z轴角速度 | rad/s | 三轴角速度测量 |
| 磁力计 | 磁方位角或三轴磁场 | 度/μT | 磁场强度和方向 |
| 重力传感器 | X/Y/Z轴重力 | m/s² | 重力矢量分量 |
| 方向传感器 | 四元数W/X/Y/Z | 无 | 设备方向四元数 |
| 指南针 | 磁方位角 | 度 | 指南针方位 |
| 计步器 | 步数 | 步 | 累计步数 |
| 位置 | 经纬度/海拔/速度等 | 度/米/m/s | GPS位置信息 |
| 气压计 | 气压/高度 | hPa/米 | 大气压力和高度 |

## 🎯 项目亮点

1. **完整性**: 支持Sensor Logger应用的所有常见传感器类型
2. **易用性**: 中文界面，人类友好的数据展示
3. **实时性**: 实时接收和展示传感器数据
4. **可扩展性**: 易于添加新的传感器类型支持
5. **稳定性**: 容错设计，即使数据解析失败也不影响接收
6. **性能**: 高效的Go语言实现，支持并发处理

## 📈 成果展示

✅ **数据接收**: 成功接收和解析Sensor Logger数据
✅ **格式转换**: 将原始数据转换为人类可读格式
✅ **Web界面**: 提供美观的实时数据仪表板
✅ **API服务**: 提供RESTful API接口
✅ **文档完整**: 提供详细的使用说明和API文档
✅ **测试工具**: 提供多种测试和演示工具

这个项目成功实现了题目要求的所有功能，提供了一个完整的传感器数据解析和展示解决方案。 